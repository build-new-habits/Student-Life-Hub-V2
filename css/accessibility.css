/*
  ACCESSIBILITY FEATURES (WCAG AAA Level)
  Purpose: Ensure EVERYONE can use the app regardless of ability
  Includes: Screen readers, keyboard navigation, high contrast, focus indicators
*/

/* ============================================
   FOCUS INDICATORS (Keyboard Navigation)
   ============================================ */

/* Make focus indicators VERY visible */
*:focus {
    outline: 3px solid var(--color-primary);      /* Thick, colored outline */
    outline-offset: 2px;                          /* Space between element and outline */
}

/* Special focus for interactive elements */
a:focus,
button:focus,
input:focus,
textarea:focus,
select:focus {
    outline: 3px solid var(--color-primary);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px var(--color-primary-light);  /* Glow effect */
}

/* Remove default browser focus (we're replacing it with better styling) */
*:focus:not(:focus-visible) {
    outline: none;
}

/* ============================================
   SKIP LINKS (Jump to main content)
   ============================================ */

.skip-link {
    position: absolute;
    top: -100px;                    /* Hidden above screen */
    left: 0;
    background: var(--color-primary);
    color: var(--color-text-inverse);
    padding: var(--space-md) var(--space-lg);
    border-radius: 0 0 var(--radius-md) 0;
    font-weight: var(--font-bold);
    z-index: var(--z-notification);
    text-decoration: none;
}

/* Show skip link when focused (Tab key) */
.skip-link:focus {
    top: 0;                         /* Slide into view */
}

/* ============================================
   SCREEN READER ONLY CONTENT
   ============================================ */

.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Make screen reader content focusable when needed */
.sr-only-focusable:focus {
    position: static;
    width: auto;
    height: auto;
    overflow: visible;
    clip: auto;
    white-space: normal;
}

/* ============================================
   HIGH CONTRAST MODE
   ============================================ */

@media (prefers-contrast: high) {
    :root {
        --color-text-primary: #000000;
        --color-background: #ffffff;
        --color-border: #000000;
    }
    
    /* Stronger borders in high contrast */
    button, input, select, textarea {
        border: 2px solid currentColor;
    }
    
    /* Remove subtle shadows */
    .card, .modal, .dropdown {
        box-shadow: none;
        border: 2px solid var(--color-border);
    }
}

/* ============================================
   REDUCED MOTION (Respects user preferences)
   ============================================ */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* ============================================
   TOUCH TARGET SIZING (Mobile accessibility)
   ============================================ */

/* Ensure all interactive elements are large enough to tap */
button,
a,
input[type="checkbox"],
input[type="radio"],
select {
    min-height: 44px;              /* Apple's recommended touch target */
    min-width: 44px;
}

/* For very small buttons, add invisible padding */
.btn-small {
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-sm) var(--space-md);
}

/* ============================================
   COLOR CONTRAST HELPERS
   ============================================ */

/* Ensure text meets WCAG AAA contrast (7:1 ratio) */
.text-high-contrast {
    color: #000000;
    background-color: #ffffff;
}

/* Warning text with sufficient contrast */
.text-warning-accessible {
    color: #7c2d12;                /* Darker orange for better contrast */
}

/* Error text with sufficient contrast */
.text-error-accessible {
    color: #7f1d1d;                /* Darker red for better contrast */
}

/* ============================================
   LINK STYLING (Must be distinguishable)
   ============================================ */

/* Links in body text MUST be underlined for accessibility */
.content-text a {
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 2px;
    color: var(--color-primary);
}

.content-text a:hover {
    text-decoration-thickness: 3px;
}

.content-text a:focus {
    background-color: var(--color-primary-light);
    outline: 3px solid var(--color-primary);
    outline-offset: 2px;
}

/* ============================================
   FORM ACCESSIBILITY
   ============================================ */

/* Ensure labels are always visible */
label {
    display: block;
    margin-bottom: var(--space-xs);
    font-weight: var(--font-semibold);
    color: var(--color-text-primary);
}

/* Required field indicator */
.required::after {
    content: " *";
    color: var(--color-error);
    font-weight: var(--font-bold);
}

/* Error messages must be clearly visible */
.form-error {
    color: var(--color-error);
    background-color: var(--color-error-light);
    padding: var(--space-sm);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--color-error);
    margin-top: var(--space-xs);
    font-weight: var(--font-medium);
}

/* ============================================
   HEADING HIERARCHY (Must be logical)
   ============================================ */

/* Visually hide heading but keep for screen readers */
.h-visual-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* ============================================
   LOADING & STATUS ANNOUNCEMENTS
   ============================================ */

/* Live regions for screen readers to announce updates */
.sr-live-polite {
    position: absolute;
    width: 1px;
    height: 1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
}

[aria-live="polite"] {
    /* Screen readers will announce when content changes */
}

[aria-live="assertive"] {
    /* Screen readers will interrupt to announce immediately */
}

/* ============================================
   FOCUS TRAPPING (For modals/dialogs)
   ============================================ */

/* When modal is open, hide background from screen readers */
body.modal-open {
    overflow: hidden;              /* Prevent scrolling */
}

body.modal-open > *:not(.modal) {
    aria-hidden: true;             /* Hide from screen readers */
}

/* ============================================
   PRINT ACCESSIBILITY
   ============================================ */

@media print {
    /* Ensure links are visible when printed */
    a[href]::after {
        content: " (" attr(href) ")";
    }
    
    /* Hide interactive elements when printing */
    button, .btn, nav {
        display: none;
    }
    
    /* Expand all collapsed content when printing */
    details {
        display: block;
    }
    
    details summary {
        display: none;
    }
}
